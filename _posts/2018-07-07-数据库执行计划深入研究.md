---
layout:  post
title:		数据库执行计划深入研究
subtitle:		数据库执行计划深入研究
date:     2018-07-06
author:   Fogeeks
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - MySql
---
 
#	数据库执行计划深入研究
由于索引失效，索引不合理，sql语句不合理等因素可能会导致慢sql
这里可以用explain执行计划来分析慢sql
```
explain select a.id,a.dept_name,b.id,b.empl_name  from dept a left join empl b on a.id = b.dept_id  where a.dept_name = 'fff' and  b.empl_name='hechao' ;

id 	select_type 	table type  	possible_keys 	key 	key_len 	ref 	rows Extra 
1	SIMPLE	b	ref	index_deptId,index_deptId_emplName	index_deptId_emplName	63	const	1	Using where; Using index
1	SIMPLE	a	eq_ref	PRIMARY,index_deptName_deptDesc_location	PRIMARY	4	eshop.b.dept_id	1	Using where
```

主要关注三个 type , key , extra 
type最好是在range以上如ref，all或者index都有优化的空间，那就是加索引用索引where最好用index且不能失效
key代表实际使用的index，null代表索引失效
extra如果是usingwhere或者usiing index就还不错，如果出现了using filesort或者using temporary; 就说明orderby或者groupby排序的字段有问题应该加索引且不要让他们失效










